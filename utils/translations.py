# Multi-language support for Sama AgroLink

LANGUAGES = {
    'en': 'English',
    'fr': 'Français', 
    'pt': 'Português',
    'sw': 'Kiswahili',
    'ha': 'Hausa'
}

TRANSLATIONS = {
    'en': {
        # Navigation and general
        'language': 'Language',
        'select_language': 'Select Language',
        'welcome': 'Welcome',
        'welcome_message': 'Welcome to Sama AgroLink - Connecting African Farmers to Markets',
        'navigation': 'Navigation',
        'home': 'Home',
        'marketplace': 'Marketplace',
        'my_products': 'My Products',
        'messages': 'Messages',
        'analytics': 'Analytics',
        'weather': 'Weather',
        'profile': 'Profile',
        'logout': 'Logout',
        'offline_mode': 'Offline Mode',
        
        # Authentication
        'login': 'Login',
        'register': 'Register',
        'email': 'Email',
        'password': 'Password',
        'full_name': 'Full Name',
        'phone': 'Phone Number',
        'user_type': 'User Type',
        'farmer': 'Farmer',
        'buyer': 'Buyer',
        'location': 'Location',
        'login_success': 'Login successful!',
        'registration_success': 'Registration successful!',
        'registration_failed': 'Registration failed. Please try again.',
        'invalid_credentials': 'Invalid email or password',
        'fill_all_fields': 'Please fill in all required fields',
        
        # Homepage
        'active_farmers': 'Active Farmers',
        'products_available': 'Products Available',
        'transactions_today': 'Transactions Today',
        'average_rating': 'Average Rating',
        'marketplace_map': 'Marketplace Map',
        'farmers_and_buyers': 'Farmers and Buyers',
        'featured_products': 'Featured Products',
        'view_details': 'View Details',
        
        # Marketplace
        'search_products': 'Search Products',
        'search_placeholder': 'Search for crops, vegetables, fruits...',
        'category': 'Category',
        'price_range': 'Price Range (USD/kg)',
        'sort_by': 'Sort By',
        'price_low_high': 'Price: Low to High',
        'price_high_low': 'Price: High to Low',
        'rating': 'Rating',
        'products_found': 'products found',
        'quantity': 'Quantity (kg)',
        'add_to_cart': 'Add to Cart',
        'contact_farmer': 'Contact Farmer',
        'added_to_cart': 'Added to cart successfully!',
        
        # Products
        'add_new_product': 'Add New Product',
        'product_name': 'Product Name',
        'price_per_kg': 'Price per kg (USD)',
        'quantity_available': 'Quantity Available (kg)',
        'description': 'Description',
        'add_product': 'Add Product',
        'product_added': 'Product added successfully!',
        'your_products': 'Your Products',
        'no_products': 'You have no products listed yet.',
        'edit': 'Edit',
        'shopping_cart': 'Shopping Cart',
        'cart_empty': 'Your cart is empty',
        'total': 'Total',
        'proceed_to_payment': 'Proceed to Payment',
        
        # Messages
        'ai_assistant': 'AI Assistant',
        'ask_question': 'Ask a question',
        'chatbot_placeholder': 'Ask about prices, weather, delivery, payments...',
        'conversations': 'Conversations',
        'no_messages': 'No messages yet',
        'reply': 'Reply',
        'send_reply': 'Send Reply',
        'reply_sent': 'Reply sent successfully!',
        'sent': 'Sent',
        
        # Analytics
        'market_analytics': 'Market Analytics',
        'market_trends': 'Market Trends',
        'price_trends': 'Price Trends Over Time',
        'price_usd_kg': 'Price (USD/kg)',
        'regional_distribution': 'Regional Distribution',
        'crop_distribution': 'Crop Distribution',
        'regional_sales': 'Regional Sales',
        'sales_usd': 'Sales (USD)',
        'ai_recommendations': 'AI Recommendations',
        
        # Weather
        'weather_forecast': 'Weather Forecast',
        'select_location': 'Select Location',
        'temperature': 'Temperature',
        'humidity': 'Humidity',
        'rainfall': 'Rainfall',
        'wind_speed': 'Wind Speed',
        'agricultural_advice': 'Agricultural Advice',
        'weekly_forecast': '7-Day Forecast',
        
        # Profile
        'user_profile': 'User Profile',
        'profile_information': 'Profile Information',
        'bio': 'Bio',
        'notification_preferences': 'Notification Preferences',
        'email_notifications': 'Email Notifications',
        'sms_notifications': 'SMS Notifications',
        'price_alerts': 'Price Alerts',
        'update_profile': 'Update Profile',
        'profile_updated': 'Profile updated successfully!',
        'transaction_history': 'Transaction History',
        'completed': 'Completed',
        'pending': 'Pending',
        'reviews': 'reviews',
        
        # Payment
        'payment': 'Payment',
        'order_summary': 'Order Summary',
        'payment_method': 'Payment Method',
        'select_payment_method': 'Select Payment Method',
        'mobile_number': 'Mobile Number',
        'process_payment': 'Process Payment',
        'payment_success': 'Payment processed successfully!',
        'payment_failed': 'Payment failed. Please try again.',
        'enter_phone_number': 'Please enter your phone number',
        
        # Chatbot responses
        'price_info': 'Current market prices vary by location. Check our analytics page for detailed price trends.',
        'weather_info': 'Weather information is available on our weather page with 7-day forecasts.',
        'delivery_info': 'Delivery is arranged directly with farmers. Most deliveries take 1-3 days.',
        'payment_info': 'We support mobile money payments including M-Pesa, Orange Money, and bank transfers.',
        'default_response': 'Thank you for your question! Our support team will get back to you soon.'
    },
    
    'fr': {
        # Navigation and general
        'language': 'Langue',
        'select_language': 'Sélectionner la langue',
        'welcome': 'Bienvenue',
        'welcome_message': 'Bienvenue sur Sama AgroLink - Connecter les agriculteurs africains aux marchés',
        'navigation': 'Navigation',
        'home': 'Accueil',
        'marketplace': 'Marché',
        'my_products': 'Mes Produits',
        'messages': 'Messages',
        'analytics': 'Analyses',
        'weather': 'Météo',
        'profile': 'Profil',
        'logout': 'Déconnexion',
        'offline_mode': 'Mode Hors Ligne',
        
        # Authentication
        'login': 'Connexion',
        'register': 'S\'inscrire',
        'email': 'Email',
        'password': 'Mot de passe',
        'full_name': 'Nom complet',
        'phone': 'Numéro de téléphone',
        'user_type': 'Type d\'utilisateur',
        'farmer': 'Agriculteur',
        'buyer': 'Acheteur',
        'location': 'Localisation',
        'login_success': 'Connexion réussie!',
        'registration_success': 'Inscription réussie!',
        'registration_failed': 'Échec de l\'inscription. Veuillez réessayer.',
        'invalid_credentials': 'Email ou mot de passe invalide',
        'fill_all_fields': 'Veuillez remplir tous les champs obligatoires',
        
        # Homepage
        'active_farmers': 'Agriculteurs Actifs',
        'products_available': 'Produits Disponibles',
        'transactions_today': 'Transactions Aujourd\'hui',
        'average_rating': 'Note Moyenne',
        'marketplace_map': 'Carte du Marché',
        'farmers_and_buyers': 'Agriculteurs et Acheteurs',
        'featured_products': 'Produits en Vedette',
        'view_details': 'Voir Détails',
        
        # Marketplace
        'search_products': 'Rechercher Produits',
        'search_placeholder': 'Rechercher cultures, légumes, fruits...',
        'category': 'Catégorie',
        'price_range': 'Gamme de Prix (USD/kg)',
        'sort_by': 'Trier par',
        'price_low_high': 'Prix: Bas à Élevé',
        'price_high_low': 'Prix: Élevé à Bas',
        'rating': 'Évaluation',
        'products_found': 'produits trouvés',
        'quantity': 'Quantité (kg)',
        'add_to_cart': 'Ajouter au Panier',
        'contact_farmer': 'Contacter l\'Agriculteur',
        'added_to_cart': 'Ajouté au panier avec succès!',
        
        # Add more French translations following the same pattern...
        'price_info': 'Les prix du marché actuels varient selon la localisation. Consultez notre page d\'analyses pour les tendances détaillées des prix.',
        'weather_info': 'Les informations météorologiques sont disponibles sur notre page météo avec des prévisions sur 7 jours.',
        'delivery_info': 'La livraison est organisée directement avec les agriculteurs. La plupart des livraisons prennent 1-3 jours.',
        'payment_info': 'Nous supportons les paiements par argent mobile y compris M-Pesa, Orange Money, et virements bancaires.',
        'default_response': 'Merci pour votre question! Notre équipe de support vous répondra bientôt.'
    },
    
    'pt': {
        # Basic Portuguese translations
        'language': 'Idioma',
        'select_language': 'Selecionar Idioma',
        'welcome': 'Bem-vindo',
        'welcome_message': 'Bem-vindo ao Sama AgroLink - Conectando Agricultores Africanos aos Mercados',
        'home': 'Início',
        'marketplace': 'Mercado',
        'farmer': 'Agricultor',
        'buyer': 'Comprador',
        'login': 'Entrar',
        'register': 'Registrar',
        'price_info': 'Os preços atuais do mercado variam por localização. Verifique nossa página de análises para tendências detalhadas de preços.',
        'default_response': 'Obrigado pela sua pergunta! Nossa equipe de suporte entrará em contato em breve.'
    },
    
    'sw': {
        # Basic Swahili translations
        'language': 'Lugha',
        'select_language': 'Chagua Lugha',
        'welcome': 'Karibu',
        'welcome_message': 'Karibu kwenye Sama AgroLink - Kuunganisha Wakulima wa Afrika na Masoko',
        'home': 'Nyumbani',
        'marketplace': 'Soko',
        'farmer': 'Mkulima',
        'buyer': 'Mnunuzi',
        'login': 'Ingia',
        'register': 'Jisajili',
        'price_info': 'Bei za soko za sasa zinatofautiana kulingana na eneo. Angalia ukurasa wetu wa uchanganuzi kwa mielekeo ya kina ya bei.',
        'default_response': 'Asante kwa swali lako! Timu yetu ya msaada itawasiliana nawe hivi karibuni.'
    },
    
    'ha': {
        # Basic Hausa translations
        'language': 'Harshe',
        'select_language': 'Zaɓi Harshe',
        'welcome': 'Barka da zuwa',
        'welcome_message': 'Barka da zuwa Sama AgroLink - Haɗa Manoman Afrika da Kasuwanni',
        'home': 'Gida',
        'marketplace': 'Kasuwa',
        'farmer': 'Manomi',
        'buyer': 'Mai siye',
        'login': 'Shiga',
        'register': 'Rajista',
        'price_info': 'Farashin kasuwa na yanzu ya bambanta bisa wurin. Duba shafin mu na bincike don cikakkun bayanai akan farashin.',
        'default_response': 'Na gode da tambayarka! Ƙungiyar mu ta tallafi za ta dawo da kai nan ba da jimawa ba.'
    }
}

def get_translation(key, language='en'):
    """Get translation for a given key and language"""
    try:
        return TRANSLATIONS[language].get(key, TRANSLATIONS['en'].get(key, key))
    except KeyError:
        return TRANSLATIONS['en'].get(key, key)

def get_all_translations(language='en'):
    """Get all translations for a language"""
    try:
        return TRANSLATIONS[language]
    except KeyError:
        return TRANSLATIONS['en']

def add_translation(key, translations_dict):
    """Add a new translation key with translations for all languages"""
    for lang, translation in translations_dict.items():
        if lang in TRANSLATIONS:
            TRANSLATIONS[lang][key] = translation

def detect_user_language(user_location=None, browser_language=None):
    """Auto-detect user language based on location or browser settings"""
    
    # Language mapping based on African countries/regions
    location_language_map = {
        'nigeria': 'en',
        'ghana': 'en',
        'kenya': 'en',
        'uganda': 'en',
        'tanzania': 'sw',
        'morocco': 'fr',
        'algeria': 'fr',
        'senegal': 'fr',
        'mali': 'fr',
        'burkina faso': 'fr',
        'ivory coast': 'fr',
        'cameroon': 'fr',
        'angola': 'pt',
        'mozambique': 'pt',
        'guinea-bissau': 'pt',
        'cape verde': 'pt',
        'niger': 'ha',
        'chad': 'fr'
    }
    
    # Try to detect from user location first
    if user_location:
        user_location_lower = user_location.lower()
        for country, lang in location_language_map.items():
            if country in user_location_lower:
                return lang
    
    # Try to detect from browser language
    if browser_language:
        browser_lang = browser_language.lower()[:2]
        if browser_lang in LANGUAGES:
            return browser_lang
    
    # Default to English
    return 'en'
